### SERIALIZABLE

Самый жёсткий, но самый тяжёлый для БД и медленный для обработки запросов уровень. Он **блокирует любые действия, пока запущена транзакция** — получается, транзакции идут строго одна за другой и максимально изолируются друг от друга. Это достигается с помощью блокировки всей таблицы от любых взаимодействий с ней, но некоторые СУБД делают менее радикально — блокируют только те строки, которые задействует текущая транзакция.

Тут никакие аномалии нам не страшны — ни грязное, ни неповторяемое, ни фантомное чтение. Но и производительность тут страдает, ведь транзакции не могут работать параллельно.

![SERIALIZABLE non repeatable read.jpg](https://habrastorage.org/r/w1560/getpro/habr/upload_files/e80/b1c/c83/e80b1cc8340cfb45f73bcd9d8bf66de3.jpg)

Отсутствие неповторяющегося чтения в SERIALIZABLE

![SERIALIZABLE phantom read.jpg](https://habrastorage.org/r/w1560/getpro/habr/upload_files/8df/8bb/514/8df8bb514aac444d9cd418ff01d79fbc.jpg)

Отсутствие фантомного чтения в SERIALIZABLE

Это 4 основных уровня изоляции. Есть ещё несколько уровней не таких популярных, но об этом мы поговорим ниже.

Наглядная таблица, которой показано, какие аномалии страшны на каких уровнях изолированности (не забываем, что в зависимости от СУБД могут быть нюансы):

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/a72/9c8/538/a729c853842e91ce26716642f8861703.jpg)

В итоге, зачем нам все эти уровни? Почему не обойтись каким‑нибудь самым безопасным SERIALIZABLE, который не допускает никаких аномалий, или каким‑нибудь среднячком READ COMMITTED? Потому что в реальной жизни бизнесовые задачи бывают совсем разные: где‑то нам важно сохранять максимальную целостность данных и изолировать транзакции так, чтобы они не пересекались друг с другом, т. к. при конфликте или ошибке цена будет велика, а где‑то мы можем смириться с какими‑то кейсами нестыковок в данных, но зато у нас будет производительность — мы сможем запускать больше транзакций одновременно.

Что касается аномалий, то в примерах мы рассмотрели основные 3 **аномалии:**

- **Грязное чтение (Dirty Read)**
- **Неповторяющееся чтение (Non-repeatable Read)**
- **Фантомное чтение (Phantom Read).**

Но также на уровнях изоляции READ UNCOMMITTED и READ COMMITTED могут ещё возникнуть такие аномалии, как:

- **Потерянное обновление (Lost Update)** — когда две транзакции одновременно читают и изменяют одни и те же данные, и при этом одно из изменений может потеряться.
- **Неупорядоченное чтение (Out‑of‑order Read**) — когда несколько чтений выполняются в произвольном порядке, что может привести к неправильным результатам в транзакциях.
