In Spring Boot, beans are the building blocks of applications, managed and configured by the Spring container. Understanding the scope of beans is crucial for designing a clean, efficient, and scalable application. In this blog, we’ll dive into the different types of bean scopes in Spring Boot, explore their use cases, and provide practical examples for each.

# What is Bean Scope?

Bean scope defines the lifecycle and visibility of a bean within the container. It tells Spring how many instances of a particular bean should be created and how long they should be available. Choosing the right scope allows for efficient resource management, better performance, and optimized memory usage.

# The Types of Bean Scopes in Spring Boot

Spring Boot supports five primary bean scopes:

1. **Singleton**
2. **Prototype**
3. **Request**
4. **Session**
5. **Application**

Each of these scopes has a specific purpose, and we’ll go through them in detail.

# 1. Singleton Scope

## Definition

The `singleton` scope is the default scope in Spring. When a bean is defined with `@Scope("singleton")` (or without specifying any scope), only one instance of that bean is created in the Spring container. This instance is shared across the entire application.

## Use Case

Singleton beans are suitable for stateless objects, shared resources, and scenarios where only one instance is needed throughout the application. Examples include database connection pools, service classes, and DAO classes.

## Example

```java
@Service  
public class SingletonService {  
    public void execute() {  
        System.out.println("Executing Singleton Service");  
    }  
}
```

```java
@RestController  
public class SingletonController {  
    @Autowired  
    private SingletonService singletonService;  
    @GetMapping("/singleton")  
    public String useSingletonService() {  
        singletonService.execute();  
        return "Check the console for singleton service output.";  
    }  
}
```

In this example, `SingletonService` is instantiated once and shared across multiple controllers or components using it.

# 2. Prototype Scope

## Definition

The `prototype` scope creates a new instance of the bean every time it’s requested from the Spring container. To define a bean as prototype, use `@Scope("prototype")`.

## Use Case

Prototype scope is ideal for stateful beans or instances that hold temporary data and are expected to change frequently. Examples include non-thread-safe classes or any component that requires new data on every use.

## Example

```java
@Component  
@Scope("prototype")  
public class PrototypeBean {  
    private String state;  
public PrototypeBean() {  
        this.state = "Initial State";  
    }  
    public void setState(String state) {  
        this.state = state;  
    }  
    public String getState() {  
        return state;  
    }  
}
```

```java
@RestController  
public class PrototypeController {  
    @Autowired  
    private ApplicationContext context;  
@GetMapping("/prototype")  
    public String usePrototype() {  
        PrototypeBean prototypeBean = context.getBean(PrototypeBean.class);  
        prototypeBean.setState("Updated State at " + System.currentTimeMillis());  
        return "Prototype Bean State: " + prototypeBean.getState();  
    }  
}
```

In this case, each call to `/prototype` will create a new `PrototypeBean` instance with its own state.

# 3. Request Scope

## Definition

The `request` scope is specific to web applications. A new instance of a bean is created for each HTTP request, and it’s discarded once the request is complete. To use `request` scope, annotate with `@Scope("request")`.

## Use Case

`Request` scope is ideal for request-specific data, such as session tokens, or components that need to carry temporary data within a single HTTP request.

## Example

```java
@Component  
@Scope("request")  
public class RequestScopedBean {  
    private String requestData;  
    public RequestScopedBean() {  
        this.requestData = "Request Data";  
    }  
    public String getRequestData() {  
        return requestData;  
    }  
}
```

```java
@RestController  
public class RequestScopeController {  
    @Autowired  
    private RequestScopedBean requestScopedBean;  
    @GetMapping("/request-scope")  
    public String handleRequest() {  
        return "Request Scoped Data: " + requestScopedBean.getRequestData();  
    }  
}
```

In this example, each request to `/request-scope` generates a new `RequestScopedBean`, ensuring isolation of data across HTTP requests.

# 4. Session Scope

## Definition

The `session` scope creates a new bean instance for each user session in a web application. The bean is available for the duration of the session. To define a bean with `session` scope, use `@Scope("session")`.

## Use Case

`Session` scope is ideal for session-specific data, like user information, preferences, or any data that needs to persist throughout the session.

## Example

```java
@Component
@Scope("session")
public class SessionScopedBean {

    private String userName;

    @RestController
    @SessionAttributes("sessionScopedBean")
    public class SessionScopeController {

        @Autowired
        private SessionScopedBean sessionScopedBean;

        public SessionScopedBean() {
            this.userName = "Default User";
        }

        public String getUserName() {
            return userName;
        }

        public void setUserName(String userName) {
            this.userName = userName;
        }
    }

    @GetMapping("/session-scope")
    public String sessionExample() {
        sessionScopedBean.setUserName("User - " + System.currentTimeMillis());
        return "Session Scoped User: " + sessionScopedBean.getUserName();
    }
}

```

Each time a new session is created, a new instance of `SessionScopedBean` is available for that session.

# 5. Application Scope

## Definition

The `application` scope is similar to `singleton`, but it is specific to the Servlet context of a web application. Beans with `application` scope are created once per Servlet context and remain until the context is destroyed. To define an application-scoped bean, use `@Scope("application")`.

## Use Case

Application scope is suitable for application-wide data that needs to be shared across sessions and requests, like configuration settings or global caches.

## Example

```java
@Component  
@Scope("application")  
public class ApplicationScopedBean {  
    private String appData = "Application-Wide Data";  
    public String getAppData() {  
        return appData;  
    }  
}
```

```java
@RestController  
public class ApplicationScopeController {  
    @Autowired  
    private ApplicationScopedBean applicationScopedBean;  
    @GetMapping("/application-scope")  
    public String getApplicationScope() {  
        return "Application Scoped Data: " + applicationScopedBean.getAppData();  
    }  
}
```

In this example, `ApplicationScopedBean` provides application-wide data available across requests and sessions.

# Choosing the Right Bean Scope

Selecting the appropriate bean scope depends on your use case:

- **Singleton**: When only one instance is needed across the entire application, typically for stateless or shared resources.
- **Prototype**: When new instances are required each time, especially for stateful objects.
- **Request**: When beans are needed only for the duration of an HTTP request in web applications.
- **Session**: When beans need to persist within a user’s session, such as user profiles.
- **Application**: For application-wide resources that span multiple sessions and requests.

# Conclusion

In Spring Boot, understanding and utilizing the right bean scope allows you to optimize application performance and manage memory effectively. With `singleton` as the default, you have flexibility with `prototype`, `request`, `session`, and `application` scopes for different use cases. Use this guide to manage bean lifecycles efficiently in your Spring Boot applications!